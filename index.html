
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ultra Smart AI Assistant</title>
<style>
  body { font-family: Arial, sans-serif; text-align: center; padding: 50px; background: #f4f4f4; }
  #output { margin-top: 20px; font-size: 1.2em; }
  button { padding: 10px 20px; font-size: 16px; margin: 10px; }
</style>
</head>
<body>
<h1>Ultra Smart AI Assistant</h1>
<p>Click the button and speak your command.</p>
<button id="startBtn">ðŸŽ¤ Start Listening</button>
<div id="output">Waiting for input...</div>

<script>
// Voice Recognition Setup
const output = document.getElementById('output');
const startBtn = document.getElementById('startBtn');
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
const recognition = new SpeechRecognition();
recognition.lang = 'en-US';
recognition.interimResults = false;

startBtn.addEventListener('click', () => {
    recognition.start();
    output.textContent = "Listening...";
});

recognition.onresult = async (event) => {
    const command = event.results[0][0].transcript.toLowerCase();
    output.textContent = `You said: "${command}"`;
    handleCommand(command);
};

// Command Handler
async function handleCommand(command) {
    if (command.includes("open google")) {
        window.open("https://www.google.com", "_blank");
        speak("Opening Google");
    } else if (command.includes("weather")) {
        output.textContent = "Fetching weather...";
        const weather = await getWeather("Thermalito");
        output.textContent = `Weather: ${weather}`;
        speak(`The weather is ${weather}`);
    } else if (command.includes("news")) {
        output.textContent = "Fetching news...";
        const news = await getNews();
        output.textContent = `Top News: ${news}`;
        speak(`Here is the latest news: ${news}`);
    } else {
        const aiReply = await askAI(command);
        output.textContent = `AI: ${aiReply}`;
        speak(aiReply);
    }
}

// Weather API
async function getWeather(city) {
    const res = await fetch(`https://api.weatherapi.com/v1/current.json?key=YOUR_WEATHER_API_KEY&q=${city}`);
    const data = await res.json();
    return `${data.current.temp_f}Â°F and ${data.current.condition.text}`;
}

// News API
async function getNews() {
    const res = await fetch(`https://newsapi.org/v2/top-headlines?country=us&apiKey=YOUR_NEWS_API_KEY`);
    const data = await res.json();
    return data.articles[0].title;
}

// AI Response (Online + Offline)
async function askAI(command) {
    if (!navigator.onLine) {
        // Offline AI using Transformers.js
        const { pipeline } = await import('https://cdn.jsdelivr.net/npm/@xenova/transformers');
        const generator = await pipeline('text-generation', 'Xenova/gpt2');
        const output = await generator(command, { max_length: 50 });
        return output[0].generated_text;
    }
    // Online AI using OpenAI API
    const response = await fetch("https://api.openai.com/v1/chat/completions", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
            "Authorization": "Bearer YOUR_OPENAI_API_KEY"
        },
        body: JSON.stringify({
            model: "gpt-4",
            messages: [{ role: "user", content: command }]
        })
    });
    const data = await response.json();
    return data.choices[0].message.content;
}

// Speech Output
function speak(text) {
    const utterance = new SpeechSynthesisUtterance(text);
    speechSynthesis.speak(utterance);
}
</script>
</body>
</html>

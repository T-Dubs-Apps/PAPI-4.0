<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Ultra Smart AI Personal Assistant</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root {
      --bg: #0f1115;
      --panel: #161a22;
      --text: #e6edf3;
      --muted: #9aa5b1;
      --accent: #7cacf8;
      --green: #58d68d;
      --red: #ff6b6b;
      --yellow: #ffd166;
    }
    * { box-sizing: border-box }
    body {
      margin: 0; background: var(--bg); color: var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    }
    header {
      padding: 24px; border-bottom: 1px solid #202636; background: linear-gradient(180deg,#0f1115 0%,#131722 100%);
    }
    h1 { margin: 0; font-size: 20px; letter-spacing: 0.2px }
    .sub { color: var(--muted); margin-top: 6px; font-size: 13px }
    .container { max-width: 940px; margin: 0 auto; padding: 20px }
    .panel {
      background: var(--panel); border: 1px solid #202636; border-radius: 14px; padding: 16px;
    }
    .row { display: grid; grid-template-columns: 1fr auto; gap: 8px; align-items: center }
    input, textarea {
      width: 100%; padding: 14px 16px; border-radius: 12px; border: 1px solid #2a3143;
      background: #0e1219; color: var(--text); font-size: 15px; outline: none;
    }
    input::placeholder { color: #7b8596 }
    button {
      padding: 12px 14px; border-radius: 12px; border: 1px solid #2a3143; background: #121622;
      color: var(--text); cursor: pointer; font-weight: 600;
    }
    button.primary { background: var(--accent); border: none; color: #0c1320 }
    button.ghost { background: transparent }
    .grid {
      display: grid; gap: 14px; grid-template-columns: repeat(auto-fit,minmax(260px,1fr)); margin-top: 14px;
    }
    .card { background: var(--panel); border: 1px solid #202636; border-radius: 14px; padding: 14px }
    .card h3 { margin: 0 0 8px 0; font-size: 15px }
    .list { display: flex; flex-direction: column; gap: 8px }
    .item {
      display: grid; grid-template-columns: auto 1fr auto; gap: 10px; align-items: center;
      padding: 10px; border: 1px dashed #2a3143; border-radius: 10px;
    }
    .item input[type="checkbox"] { transform: scale(1.2) }
    .pill { display: inline-block; padding: 6px 10px; border-radius: 999px; background: #0e1219; color: var(--muted); border: 1px solid #2a3143; font-size: 12px }
    .log {
      background: #0d1117; border: 1px solid #202636; border-radius: 12px; padding: 12px; height: 180px; overflow: auto;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; font-size: 12px;
    }
    .log .entry { margin-bottom: 6px }
    .ok { color: var(--green) } .warn { color: var(--yellow) } .err { color: var(--red) }
    .footer { color: var(--muted); font-size: 12px; margin-top: 8px }
    .help {
      margin-top: 12px; font-size: 13px; color: var(--muted);
    }
    .kbd {
      display: inline-block; border: 1px solid #2a3143; border-bottom-width: 3px; background: #0e1219; border-radius: 6px;
      padding: 2px 6px; font-family: ui-monospace, monospace; font-size: 12px; color: var(--text);
    }
    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <h1>Ultra Smart AI Personal Assistant</h1>
      <div class="sub">One command in, smart actions out. Voice enabled. Local-first. GitHub Pages ready.</div>
    </div>
  </header>

  <main class="container">
    <div class="panel">
      <div class="row" aria-label="Command input">
        <input id="command" type="text" placeholder="Try: remind me tomorrow 9am to email Sam; add todo buy milk; weather in Seattle; timer 10m; summarize https://example.com" />
        <div style="display:flex; gap:8px;">
          <button id="speakBtn" class="ghost" title="Toggle voice input">üéôÔ∏è</button>
          <button id="runBtn" class="primary">Run</button>
        </div>
      </div>
      <div class="help">
        <span class="pill">Examples</span>
        ‚Ä¢ ‚Äúadd note project kickoff at 3pm‚Äù ‚Ä¢ ‚Äúconvert 12 km to miles‚Äù ‚Ä¢ ‚Äúmath (2+3)*4‚Äù ‚Ä¢ ‚Äúagenda this week‚Äù
        ‚Ä¢ ‚Äútranslate to Spanish: good morning‚Äù ‚Ä¢ ‚Äúsummarize https://developer.mozilla.org‚Äù
      </div>
    </div>

    <div class="grid" style="margin-top:16px;">
      <section class="card" aria-label="Notes">
        <h3>Notes</h3>
        <div class="list" id="notesList"></div>
        <div class="footer">Use: <span class="kbd">add note ‚Ä¶</span>, <span class="kbd">list notes</span>, <span class="kbd">delete note #</span></div>
      </section>

      <section class="card" aria-label="Todos">
        <h3>Todos</h3>
        <div class="list" id="todosList"></div>
        <div class="footer">Use: <span class="kbd">add todo ‚Ä¶</span>, <span class="kbd">check #</span>, <span class="kbd">uncheck #</span>, <span class="kbd">delete todo #</span></div>
      </section>

      <section class="card" aria-label="Reminders">
        <h3>Reminders</h3>
        <div class="list" id="remindersList"></div>
        <div class="footer">Use: <span class="kbd">remind me ‚Ä¶</span>, <span class="kbd">list reminders</span>, <span class="kbd">delete reminder #</span></div>
      </section>
    </div>

    <section class="card" style="margin-top:16px;">
      <h3>Activity log</h3>
      <div id="log" class="log" aria-live="polite" aria-atomic="false"></div>
      <div class="footer">Tip: Press <span class="kbd">Enter</span> to run. Press <span class="kbd">/</span> to focus the command bar.</div>
    </section>
  </main>

  <script>
    // Local state
    const store = {
      notes: JSON.parse(localStorage.getItem('notes') || '[]'),
      todos: JSON.parse(localStorage.getItem('todos') || '[]'),
      reminders: JSON.parse(localStorage.getItem('reminders') || '[]'),
      timers: [],
    };

    const save = () => {
      localStorage.setItem('notes', JSON.stringify(store.notes));
      localStorage.setItem('todos', JSON.stringify(store.todos));
      localStorage.setItem('reminders', JSON.stringify(store.reminders));
    };

    // Utilities
    const logEl = document.getElementById('log');
    function log(msg, type='ok') {
      const div = document.createElement('div');
      div.className = 'entry ' + type;
      div.textContent = '[' + new Date().toLocaleTimeString() + '] ' + msg;
      logEl.prepend(div);
    }

    function speak(text) {
      try {
        const u = new SpeechSynthesisUtterance(text);
        u.rate = 1.0; u.pitch = 1.0; u.lang = navigator.language || 'en-US';
        speechSynthesis.cancel(); speechSynthesis.speak(u);
      } catch (e) {}
    }

    function parseDuration(str) {
      // supports "10s", "10 sec", "5m", "2h", "tomorrow 9am", "in 15 minutes"
      str = str.toLowerCase();
      const now = new Date();
      // "in X minutes/hours/seconds"
      const inMatch = str.match(/\bin\s+(\d+)\s+(second|seconds|minute|minutes|hour|hours)\b/);
      if (inMatch) {
        const val = parseInt(inMatch[1], 10);
        const unit = inMatch[2];
        const ms = unit.startsWith('second') ? val*1000 : unit.startsWith('minute') ? val*60000 : val*3600000;
        return new Date(Date.now()+ms);
      }
      // "10m", "5h", "30s"
      const shortMatch = str.match(/\b(\d+)\s*(s|sec|secs|m|min|mins|h|hr|hrs)\b/);
      if (shortMatch) {
        const val = parseInt(shortMatch[1], 10);
        const unit = shortMatch[2];
        const ms = /s|sec/.test(unit) ? val*1000 : /m|min/.test(unit) ? val*60000 : val*3600000;
        return new Date(Date.now()+ms);
      }
      // absolute: "today 5pm", "tomorrow 9am"
      if (/\btomorrow\b/.test(str) || /\btoday\b/.test(str)) {
        const isTomorrow = /\btomorrow\b/.test(str);
        const timeMatch = str.match(/\b(\d{1,2})(?::(\d{2}))?\s*(am|pm)?\b/);
        if (timeMatch) {
          const d = new Date();
          d.setHours(9,0,0,0);
          if (isTomorrow) d.setDate(d.getDate()+1);
          let hour = parseInt(timeMatch[1], 10);
          const minute = timeMatch[2] ? parseInt(timeMatch[2], 10) : 0;
          const ampm = timeMatch[3];
          if (ampm) {
            if (ampm === 'pm' && hour < 12) hour += 12;
            if (ampm === 'am' && hour === 12) hour = 0;
          }
          d.setHours(hour, minute, 0, 0);
          return d;
        }
      }
      // "YYYY-MM-DD HH:MM"
      const isoMatch = str.match(/\b(\d{4})-(\d{2})-(\d{2})(?:\s+(\d{2}):(\d{2}))?\b/);
      if (isoMatch) {
        const [_, y, mo, da, hh='09', mm='00'] = isoMatch;
        return new Date(parseInt(y), parseInt(mo)-1, parseInt(da), parseInt(hh), parseInt(mm), 0, 0);
      }
      return null;
    }

    function humanDate(d) {
      return d.toLocaleString(undefined, { weekday:'short', month:'short', day:'numeric', hour:'2-digit', minute:'2-digit' });
    }

    // Renderers
    function renderNotes() {
      const el = document.getElementById('notesList');
      el.innerHTML = '';
      store.notes.forEach((n, i) => {
        const item = document.createElement('div');
        item.className = 'item';
        item.innerHTML = `
          <div class="pill">#${i+1}</div>
          <div>${n.text}</div>
          <button data-i="${i}" class="ghost">Delete</button>
        `;
        item.querySelector('button').onclick = () => { store.notes.splice(i,1); save(); renderNotes(); log('Deleted note #'+(i+1)); };
        el.appendChild(item);
      });
      if (!store.notes.length) el.innerHTML = '<div class="pill">No notes yet</div>';
    }

    function renderTodos() {
      const el = document.getElementById('todosList');
      el.innerHTML = '';
      store.todos.forEach((t, i) => {
        const item = document.createElement('div');
        item.className = 'item';
        item.innerHTML = `
          <input type="checkbox" ${t.done?'checked':''} />
          <div>${t.text}</div>
          <button class="ghost">Delete</button>
        `;
        item.querySelector('input').onchange = (e) => { t.done = e.target.checked; save(); log((t.done?'Checked':'Unchecked')+' todo #'+(i+1)); renderTodos(); };
        item.querySelector('button').onclick = () => { store.todos.splice(i,1); save(); renderTodos(); log('Deleted todo #'+(i+1)); };
        el.appendChild(item);
      });
      if (!store.todos.length) el.innerHTML = '<div class="pill">No todos yet</div>';
    }

    function renderReminders() {
      const el = document.getElementById('remindersList');
      el.innerHTML = '';
      store.reminders.forEach((r, i) => {
        const item = document.createElement('div');
        item.className = 'item';
        item.innerHTML = `
          <div class="pill">#${i+1}</div>
          <div>${r.text} ‚Äî <span class="pill">${humanDate(new Date(r.when))}</span></div>
          <button class="ghost">Delete</button>
        `;
        item.querySelector('button').onclick = () => { store.reminders.splice(i,1); save(); renderReminders(); log('Deleted reminder #'+(i+1)); };
        el.appendChild(item);
      });
      if (!store.reminders.length) el.innerHTML = '<div class="pill">No reminders yet</div>';
    }

    // Timers and notifications
    function scheduleReminder(text, when) {
      const id = setTimeout(() => {
        try { if (Notification.permission === 'granted') new Notification('Reminder', { body: text }); } catch (e) {}
        speak('Reminder: ' + text);
        log('Reminder: ' + text, 'warn');
      }, Math.max(0, when.getTime()-Date.now()));
      store.timers.push(id);
    }

    // Command router
    async function runCommand(raw) {
      const cmd = raw.trim();
      if (!cmd) return;

      // Quick transforms
      if (/^help$/.test(cmd)) {
        log('Commands: add note|todo ‚Ä¶; list notes|todos|reminders; delete note|todo|reminder #; check|uncheck #; remind me ‚Ä¶; timer 10m; agenda today|this week; weather in CITY; time in CITY; convert X unit to unit; math EXP; translate to LANG: TEXT; summarize URL; search QUERY');
        speak('Help listed in the log.');
        return;
      }

      // Notes
      if (/^add note\b/i.test(cmd)) {
        const text = cmd.replace(/^add note\b/i,'').trim();
        if (!text) return log('Provide note text', 'err');
        store.notes.unshift({ text, at: Date.now() }); save(); renderNotes();
        log('Added note: ' + text);
        speak('Note added.');
        return;
      }
      if (/^list notes\b/i.test(cmd)) { renderNotes(); log('Listed notes'); return; }
      if (/^delete note\b/i.test(cmd)) {
        const idx = parseInt(cmd.match(/\b(\d+)\b/)?.[1]||'',10)-1;
        if (isNaN(idx) || idx<0 || idx>=store.notes.length) return log('Invalid note index', 'err');
        store.notes.splice(idx,1); save(); renderNotes(); log('Deleted note #'+(idx+1)); return;
      }

      // Todos
      if (/^add todo\b/i.test(cmd)) {
        const text = cmd.replace(/^add todo\b/i,'').trim();
        if (!text) return log('Provide todo text', 'err');
        store.todos.unshift({ text, done:false, at: Date.now() }); save(); renderTodos();
        log('Added todo: ' + text); speak('Todo added.'); return;
      }
      if (/^list todos\b/i.test(cmd)) { renderTodos(); log('Listed todos'); return; }
      if (/^delete todo\b/i.test(cmd)) {
        const idx = parseInt(cmd.match(/\b(\d+)\b/)?.[1]||'',10)-1;
        if (isNaN(idx) || idx<0 || idx>=store.todos.length) return log('Invalid todo index', 'err');
        store.todos.splice(idx,1); save(); renderTodos(); log('Deleted todo #'+(idx+1)); return;
      }
      if (/^(check|uncheck)\b/i.test(cmd)) {
        const isCheck = /^check\b/i.test(cmd);
        const idx = parseInt(cmd.match(/\b(\d+)\b/)?.[1]||'',10)-1;
        if (isNaN(idx) || idx<0 || idx>=store.todos.length) return log('Invalid todo index', 'err');
        store.todos[idx].done = isCheck; save(); renderTodos(); log((isCheck?'Checked':'Unchecked')+' todo #'+(idx+1)); return;
      }

      // Reminders and timers
      if (/^remind me\b/i.test(cmd)) {
        const when = parseDuration(cmd);
        const text = cmd.replace(/^remind me\b/i,'').trim() || 'Reminder';
        if (!when) return log('Could not parse date/time', 'err');
        store.reminders.unshift({ text, when: when.getTime() }); save(); renderReminders(); scheduleReminder(text, when);
        log('Reminder set for '+humanDate(when)+' ‚Äî '+text); speak('Reminder set.'); return;
      }
      if (/^list reminders\b/i.test(cmd)) { renderReminders(); log('Listed reminders'); return; }
      if (/^delete reminder\b/i.test(cmd)) {
        const idx = parseInt(cmd.match(/\b(\d+)\b/)?.[1]||'',10)-1;
        if (isNaN(idx) || idx<0 || idx>=store.reminders.length) return log('Invalid reminder index', 'err');
        store.reminders.splice(idx,1); save(); renderReminders(); log('Deleted reminder #'+(idx+1)); return;
      }
      if (/^timer\b/i.test(cmd)) {
        const when = parseDuration(cmd);
        if (!when) return log('Could not parse timer', 'err');
        const text = 'Timer done';
        scheduleReminder(text, when);
        log('Timer set: '+humanDate(when)); speak('Timer started.'); return;
      }
      if (/^agenda\b/i.test(cmd)) {
        const isWeek = /\bweek\b/i.test(cmd);
        const now = new Date();
        const end = new Date(now);
        end.setDate(now.getDate() + (isWeek ? 7 : 1));
        const upcoming = store.reminders
          .map(r => ({...r, when:new Date(r.when)}))
          .filter(r => r.when >= now && r.when <= end)
          .sort((a,b)=>a.when-b.when);
        log((upcoming.length?'Upcoming '+(isWeek?'week':'day')+': ':'No upcoming ' + (isWeek?'week':'day')+' reminders'));
        upcoming.forEach(r=>log(humanDate(r.when)+' ‚Äî '+r.text));
        speak(upcoming.length?('You have '+upcoming.length+' upcoming '+(isWeek?'weekly':'daily')+' reminders.'):('No upcoming reminders.'));
        return;
      }

      // Weather (no API key via wttr.in)
      if (/^weather\b|weather in\b/i.test(cmd)) {
        const city = cmd.replace(/^weather(?:\s+in)?\b/i,'').trim() || 'San Francisco';
        try {
          const res = await fetch(`https://wttr.in/${encodeURIComponent(city)}?format=j1`);
          const data = await res.json();
          const cur = data.current_condition?.[0];
          const temp = cur ? cur.temp_C + '¬∞C' : 'n/a';
          const desc = cur ? cur.weatherDesc?.[0]?.value : 'n/a';
          log(`Weather in ${city}: ${temp}, ${desc}`);
          speak(`Weather in ${city}: ${temp}, ${desc}`);
        } catch (e) { log('Weather lookup failed', 'err'); }
        return;
      }

      // Time in city via worldtimeapi.org
      if (/^time in\b/i.test(cmd)) {
        const city = cmd.replace(/^time in\b/i,'').trim();
        if (!city) return log('Provide a city or timezone, e.g., "time in Europe/Paris"', 'err');
        try {
          // Try timezone directly; fallback not guaranteed for arbitrary city names
          const res = await fetch(`https://worldtimeapi.org/api/timezone/${encodeURIComponent(city)}`);
          const data = await res.json();
          const dt = new Date(data.datetime);
          log(`Time in ${city}: ${dt.toLocaleString()}`);
          speak(`Time in ${city}: ${dt.toLocaleString()}`);
        } catch (e) { log('Time lookup failed. Try a timezone like "America/Los_Angeles"', 'err'); }
        return;
      }

      // Conversions
      if (/^convert\b/i.test(cmd)) {
        // e.g., convert 12 km to miles
        const m = cmd.match(/convert\s+([\d\.]+)\s+([a-zA-Z]+)\s+to\s+([a-zA-Z]+)/i);
        if (!m) return log('Use: convert 12 km to miles', 'err');
        const val = parseFloat(m[1]); const from = m[2].toLowerCase(); const to = m[3].toLowerCase();
        const units = {
          // length
          m: 1, meter:1, meters:1, km:1000, kilometer:1000, kilometers:1000,
          cm:0.01, mm:0.001, mile:1609.344, miles:1609.344, yard:0.9144, yards:0.9144, foot:0.3048, feet:0.3048, inch:0.0254, inches:0.0254,
          // mass
          g:1, gram:1, grams:1, kg:1000, kilogram:1000, kilograms:1000, lb:453.59237, lbs:453.59237, pound:453.59237, pounds:453.59237, oz:28.349523125, ounce:28.349523125, ounces:28.349523125,
          // volume
          l:1, liter:1, liters:1, ml:0.001, milliliter:0.001, milliliters:0.001, gallon:3.785411784, gallons:3.785411784, cup:0.24, cups:0.24,
        };
        const category = (u)=>({length:['m','km','cm','mm','mile','yard','foot','inch'],mass:['g','kg','lb','oz'],volume:['l','ml','gallon','cup']}).length;
        if (!(from in units) || !(to in units)) return log('Unknown units', 'err');
        // naive: convert via SI base per category; assume same category
        const baseFrom = units[from], baseTo = units[to];
        const result = val * (baseFrom / baseTo);
        log(`${val} ${from} = ${result.toFixed(4)} ${to}`);
        speak(`${val} ${from} equals ${result.toFixed(2)} ${to}`);
        return;
      }

      // Math
      if (/^math\b/i.test(cmd)) {
        const expr = cmd.replace(/^math\b/i,'').trim();
        try {
          // VERY basic, safe evaluation: numbers, + - * / () ^ and Math functions mapped
          const cleaned = expr.replace(/[^-+/*()\d.\s^]/g,'');
          const jsExpr = cleaned.replace(/\^/g,'**');
          // eslint-disable-next-line no-new-func
          const result = Function('return ('+jsExpr+')')();
          log(`Result: ${result}`); speak(`Result ${result}`); 
        } catch (e) { log('Invalid expression', 'err'); }
        return;
      }

      // Translation (very naive local rules)
      if (/^translate to\b/i.test(cmd)) {
        const m = cmd.match(/^translate to\s+([a-zA-Z\-]+):\s*(.+)$/i);
        if (!m) return log('Use: translate to Spanish: good morning', 'err');
        const lang = m[1].toLowerCase(); const text = m[2];
        // Without external APIs, we‚Äôll do placeholder response
        log(`Translation (${lang}): ${text} ‚Üí [requires external API for real translation]`);
        speak('Translation requires an online API.');
        return;
      }

      // Summarize URL (fetch page, extract text heuristically)
      if (/^summarize\b/i.test(cmd)) {
        const url = cmd.replace(/^summarize\b/i,'').trim();
        if (!/^https?:\/\//.test(url)) return log('Provide a full URL (https://...)', 'err');
        try {
          const res = await fetch(url, { mode: 'cors' });
          const html = await res.text();
          const text = html.replace(/<script[\s\S]*?<\/script>/gi,'')
                           .replace(/<style[\s\S]*?<\/style>/gi,'')
                           .replace(/<[^>]+>/g,' ')
                           .replace(/\s+/g,' ')
                           .trim();
          const summary = text.split('. ').slice(0,5).join('. ') + (text.length>0 ? '‚Ä¶' : '');
          log('Summary: ' + (summary || 'No readable content'));
          speak('Here is a brief summary.');
        } catch (e) { log('Failed to fetch URL for summary (CORS may block)', 'err'); }
        return;
      }

      // Lightweight search via DuckDuckGo HTML (proxy-free may be blocked)
      if (/^search\b/i.test(cmd)) {
        const q = cmd.replace(/^search\b/i,'').trim();
        if (!q) return log('Provide a search query', 'err');
        try {
          const res = await fetch('https://duckduckgo.com/html/?q='+encodeURIComponent(q));
          const html = await res.text();
          const matches = [...html.matchAll(/<a rel="nofollow" class="result__a" href="([^"]+)">([^<]+)<\/a>/g)]
            .slice(0,5)
            .map(m => ({ url: m[1], title: m[2] }));
          if (!matches.length) return log('No results or blocked by CORS', 'warn');
          matches.forEach((r,i) => log(`#${i+1} ${r.title} ‚Äî ${r.url}`));
          speak('Top results listed.');
        } catch (e) { log('Search failed (likely CORS)', 'err'); }
        return;
      }

      // Default: small talk + fallback
      log('I did not recognize that. Type "help" for commands.', 'warn');
      speak('Please try one of the documented commands. Say help to hear them.');
    }

    // Voice input
    let recognizing = false;
    let recognition;
    function toggleVoice() {
      if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
        log('Speech recognition not supported in this browser', 'err'); return;
      }
      const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
      if (!recognition) {
        recognition = new SR();
        recognition.lang = navigator.language || 'en-US';
        recognition.interimResults = false;
        recognition.maxAlternatives = 1;
        recognition.onresult = (e) => {
          const text = e.results[0][0].transcript;
          document.getElementById('command').value = text;
          log('Heard: ' + text);
          runCommand(text);
        };
        recognition.onerror = (e) => { log('Voice error: '+(e.message||e.error), 'err'); recognizing=false; };
        recognition.onend = () => { recognizing=false; };
      }
      if (!recognizing) { recognition.start(); recognizing=true; log('Listening‚Ä¶'); }
      else { recognition.stop(); recognizing=false; log('Stopped listening'); }
    }

    // Notifications permission
    (async () => {
      try {
        if ('Notification' in window && Notification.permission === 'default') {
          await Notification.requestPermission();
        }
      } catch (e) {}
    })();

    // Wire up UI
    renderNotes(); renderTodos(); renderReminders();

    document.getElementById('runBtn').onclick = () => runCommand(document.getElementById('command').value);
    document.getElementById('speakBtn').onclick = toggleVoice;
    document.getElementById('command').addEventListener('keydown', (e) => {
      if (e.key === 'Enter') runCommand(e.target.value);
    });
    window.addEventListener('keydown', (e) => {
      if (e.key === '/') {
        e.preventDefault();
        document.getElementById('command').focus();
      }
    });
  </script>
</body>
</html>
